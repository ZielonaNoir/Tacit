# Git Hooks 设置指南

Git 默认不会检查语法，但你可以配置 pre-commit hooks 来在提交前自动检查。

## 方案 1: 手动运行检查（推荐）

在提交前手动运行：

```bash
# TypeScript 类型检查
pnpm type-check

# 或者构建检查（更严格）
pnpm build
```

如果检查通过，再提交代码。

## 方案 2: 使用 Husky（需要安装）

1. 安装 husky：
```bash
pnpm add -D husky
pnpm exec husky install
```

2. 创建 pre-commit hook：
```bash
pnpm exec husky add .husky/pre-commit "pnpm type-check"
```

3. 现在每次提交前会自动运行类型检查。

## 方案 3: 使用 lint-staged（只检查暂存的文件）

1. 安装依赖：
```bash
pnpm add -D husky lint-staged
```

2. 在 `package.json` 中添加：
```json
{
  "lint-staged": {
    "*.{vue,ts,tsx}": ["vue-tsc --noEmit"]
  }
}
```

3. 创建 hook：
```bash
pnpm exec husky add .husky/pre-commit "pnpm lint-staged"
```

## 当前配置

已添加 `type-check` 脚本到 `package.json`，你可以：

### 手动运行检查（Windows PowerShell）
```powershell
# 方法 1: 使用 npm 脚本
pnpm type-check

# 方法 2: 使用 PowerShell 脚本
.\pre-commit-check.ps1
```

### 自动检查（Git Hook）

已创建 Git pre-commit hook，但需要确保可执行：

**Windows (Git Bash):**
```bash
chmod +x .git/hooks/pre-commit
```

**或者手动测试:**
```bash
.git/hooks/pre-commit
```

**注意**: Windows 上 Git hooks 可能需要 Git Bash 环境才能正常工作。如果 hook 不工作，请使用手动检查方法。

### 检查结果

✅ 如果类型检查通过：可以正常提交
❌ 如果类型检查失败：会显示错误信息，需要先修复错误才能提交

**已修复的问题：**
- ✅ 更新了 `modules_config` 类型定义
- ✅ 修复了未使用的导入
- ✅ 修复了类型不匹配问题
- ✅ 所有 TypeScript 类型错误已解决

